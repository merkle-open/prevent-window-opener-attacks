<html>

<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="example.css">
</head>

<body>
	<h1>Evil target-page</h1>
	<div class="content">
		<p class="warning">This page contains an evil script-snippet and try to overwrite the location of the window.opener.</p>
		<p class="error" style="display:none;">Oops..! You have been redirected!</p>
		<p class="success" style="display:none;">Great! Redirect was blocked.</p>
	</div>
</body>

<script>
let selector = '.success';

function hack() {
    try {
        if (window.opener) {
            window.opener.location.href = 'evil-fake-page.html';
            selector = '.error';
            return true;
        }
    } catch (e) {
        return false;
    }
}

if (!hack()) {
    document.querySelector(selector).style.display = 'block';
}
</script>

</html>
